<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>change 이벤트</title>
        <style type="text/css">
			* { text-align:center; }
			table, tr, td {
				margin: 0 auto; 
				width: 120px;
				border: solid 3px grey;
				border-collapse: collapse;
			}
			th, .bg { 
				background-color:#036;
				color:white;
				font-weight:bold;
			}
		</style>
		<script src="jquery-3.7.1.min.js"></script>
		<script type="text/javascript">
			$(document).ready(function() {
				var price = 4500000; // 상품 기본사
				var amount; // 전체주문액
				var chkAmount = 0; //선택옵션가
				var optAmount = 0; //  기본옵션가
				// 속성 선택자를 이용해 가져옴, 문서내 모든 체트박스 선택 후 참조값 반환(유사배열 형태로 반환) - each method 사용
				var $checkBox = $(':checkBox');
				
				// 전체 주문액 계산 후 출력하는 함수(일반함수)
				function showAmount(){
					amount = price + optAmount + chkAmount; // 전체 주문액 계산
					$('#amount').text(amount.toLocaleString() + " 원"); // 천단위 구분자 문자열에 표시 - 수치를 string으로 변환하는 함수 사용 toLocaleString()
				}
				
				// select 태그 option 변경시 (change 이벤트 발생) 기본 옵션금액 계산 후 showAmount()호출
				$('#basicOption').on('change', function(){
					optAmount = Number($(this).val()); // 기본 옵션 금액
					showAmount();
				});
				
				// checkBox 클릭시 선택옵션가(chkAmount) 계산
				$checkBox.on('click', function(){
					chkAmount = 0;
					$checkBox.each(function() { // click 이벤트 발생 시 모든 체크박스 순회
						if ($(this).is(':checked')){
							chkAmount += Number($(this).val()); // 선택한 경우에만 누적금액 계산
						}
					});
					showAmount();
				});
	 	    });
			
		</script> 
    </head>
    <body>
        	<h1>카메라 주문서</h1>        
            <table border="1">
                <tr><td colspan="3"><img src="image/camera.jpg"></td></tr>
                <tr><td class="bg">기본 가격</td><td  colspan="2">4,500,000 원</td></tr>   
                <tr><td class="bg">기본 옵션 </td>
                     <td  colspan="2"><select id="basicOption" >
                                   <option value="0">선택하세요</option>
                                   <option value="100000">삼각대 100,000원</option>
                                   <option value="50000">차량용 충전기 50,000원</option>
                              </select></td></tr>
                <tr><th>선택 옵션</th><th>가격</th><th>선택</th></tr>   
                <tr><td>렌즈 필터</td><td>30,000 원</td><td><input type="checkbox"  id="lenzFilter" value="30000"></td></tr>        
                <tr><td>DSLR 가방</td><td>40,000 원</td><td><input type="checkbox"  id="dslrBag" value="40000"></td></tr>   
                <tr><td>청소도구</td><td>7,000 원</td><td><input type="checkbox"  id="cleaningTools" value="7000"></td></tr> 
                <tr><td class="bg">주문액</td><td id="amount" colspan="2">4,500,000 원</td></tr>           
            </table>                 
    </body>
</html>